<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link rel="shortcut icon" href="img/icon.png" type="image/x-icon" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/index.css">

  <script src="cfg.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/index.js"></script>
  <script src="js/db.js"></script>
  <script src="js/lc.js"></script>
  <script src="js/qr.js"></script>
  <script src="js/init.js"></script>


  <title>Monterrey Balanza</title>
  <!-- <style type="text/css">
			.centred {
				position: absolute;
				left: 50%;
				top: 50%;
				-webkit-transform: translate(-50%, -50%);
				transform: translate(-50%, -50%);
			}
  </style> -->

<style>
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#progressShow {
  display: none; 
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh; /* altura completa de la pantalla */
  background: rgba(0,0,0,0.5);
  z-index: 99999;

  display: flex;
  justify-content: center; /* centra horizontal */
  align-items: center;     /* centra vertical */
  text-align: center;
}

#progressContent {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

#msgProgress {
  color: white;
  background: #202020;
  padding: 0.5em 1em;
  border-radius: 8px;
  margin-bottom: 15px;
  font-size: 1em;
  text-align: center;
}

.progress {
  width: 80%;
  max-width: 400px;
  height: 0.8em;
  background: #ccc;
  border-radius: 5px;
  overflow: hidden;
  position: relative;
}

.progress .indeterminate {
  background: #2196F3;
  width: 100%;
  height: 100%;
  position: absolute;
  animation: indeterminate 1.5s infinite linear;
}

@keyframes indeterminate {
  0% { left: -100%; width: 100%; }
  50% { left: 100%; width: 10%; }
  100% { left: 100%; width: 10%; }
}


  </style>


</head>
<body>

  
  <div id="app">
  </div>


<div id="progressShow">
  <div id="progressContent">
    <b id="msgProgress">Cargando...</b>
    <div class="progress">
      <div class="indeterminate"></div>
    </div>
  </div>
</div>


 

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="print/printThis.js"></script>

  <script type="text/javascript">

    $('#progressShow').on('long-press', function(e) {
     e.preventDefault();
     hideProgress();
    });


    async function send_(file,datos,funcion){
	var domain='';
	var debug=true;
	var es=$.ajax({
		type: "POST",
		url: domain+file,
		dataType: 'json',
		data: datos,
		success: function(json){
			if(debug){
				console.log('request=>'+JSON.stringify(datos)+"\n"+'response=>'+JSON.stringify(json));
			}
			funcion(json);
		},
		error: function (err) {
			alert('Error la OperaciÃ³n'), console.log('request=>'+JSON.stringify(datos)+"\n"+'error response=>'+JSON.stringify(err));
		}
	});
}



    $(document).ready(function(){

    
      var urll='http://app-web-mty/balanzafexs1_1/';
   
     
      var ff_direccion=urll+'server.php';
      
       send_(ff_direccion,{call:'set_sesion_ubi',ubi: urll },function(data) {
 
        send_(ff_direccion,{call:'get_sesion_posi'},function(datad) { 
          console.log("dr "+posii);
             console.log("dr "+posii);      
             console.log("dr tt "+JSON.stringify(datad));                
             console.log("dr tt "+datad.length);                                
            if(datad.length>0){
              var posii= datad[0]['posi'];
	            console.log("dr "+posii);

              if(posii==0){
                send_(ff_direccion, { call: 'cerrar_sesion'}, function (datadd) {
                    console.log("dr r "+JSON.stringify(datadd));
                  
                      loadPageDirt('app','a.html');
                  });
              }else{
                loadPageDirt('app',posii);
              }
            
            }else{
             console.log(datad.length);
                  send_(ff_direccion, { call: 'cerrar_sesion'}, function (datadd) {
                    console.log("dr r "+JSON.stringify(datadd));
                  
                      loadPageDirt('app','a.html');
                  });
            }
	          
			   							   
         });

		   });

});


  </script>
</body>
</html>